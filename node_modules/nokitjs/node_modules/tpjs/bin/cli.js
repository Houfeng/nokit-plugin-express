#!/usr/bin/env node
var path=require("path"),fs=require("fs"),utils=require("real-utils"),CmdLine=require("cmdline"),pkg=require("../package.json"),compile=require("../lib/compile"),cmdLine=new CmdLine,cwd=process.cwd(),src=cmdLine.args[0],dst=cmdLine.args[1];if(cmdLine.options.has("-v"))console.log(pkg.rawName+" "+pkg.version);else if(utils.isNull(src)||utils.isNull(dst))console.log("usage: tp <src> <dst>");else{src=path.resolve(cwd,src),dst=path.resolve(cwd,dst);var funcName=path.basename(dst).split(".")[0],srcBuffer=fs.readFileSync(src).toString(),dstBuffer=compile(funcName,srcBuffer);fs.writeFileSync(dst,dstBuffer)}